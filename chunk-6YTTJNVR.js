import{a as M,b as F,c as ue}from"./chunk-KB4BOHEY.js";import{a as ce}from"./chunk-B2PUS2JT.js";import"./chunk-4N6BO7AP.js";import{E as de,F as k,j as y,k as G,n as Z,v as E}from"./chunk-Z3C6DEUP.js";import{Ca as ie,Da as re,Ea as ne,Fa as oe,G as z,Ga as ae,I as C,Ia as se,Ja as le,K as J,L as H,R as K,V as Q,W as X,_ as Y,aa as $,ba as ee,ca as te,db as me}from"./chunk-2FEP6AZJ.js";import{$b as o,Ac as A,Ba as R,Bb as j,Cb as D,Cc as V,Dc as P,Ec as U,Fc as B,Gc as q,Hc as S,Ma as g,Mb as w,Na as p,Ob as c,Qb as W,Tb as _,Vb as I,_b as i,ac as d,ec as L,nc as b,pc as u,qa as v,ub as m,va as x,vb as h,xc as T,yc as l,zc as O}from"./chunk-GCPY7ULT.js";import"./chunk-MQNJ6KAK.js";import"./chunk-F6XAREQC.js";import"./chunk-FFXK657A.js";var N=(()=>{let a=class a{constructor(){E.initializeApp(ue.firebase)}getFirestore(){return F}getDatabase(){return M}getAuth(){return k}};a.\u0275fac=function(e){return new(e||a)},a.\u0275prov=v({token:a,factory:a.\u0275fac,providedIn:"root"});let s=a;return s})();var pe=(()=>{let a=class a{constructor(t,e,r){this.afu=t,this.router=e,this.ngZone=r,this.showLoader=!1,this.afu.authState.subscribe(f=>{this.authState=f})}get isUserAnonymousLoggedIn(){return this.authState!==null?this.authState.isAnonymous:!1}get currentUserId(){return this.authState!==null?this.authState.uid:""}get currentUserName(){return this.authState.email}get currentUser(){return this.authState!==null?this.authState:null}get isUserEmailLoggedIn(){return this.authState!==null&&!this.isUserAnonymousLoggedIn}registerWithEmail(t,e){return this.afu.createUserWithEmailAndPassword(t,e).then(r=>{this.authState=r}).catch(r=>{throw console.log(r),r})}loginWithEmail(t,e){return this.afu.signInWithEmailAndPassword(t,e).then(r=>{this.authState=r}).catch(r=>{throw console.log(r),r})}singout(){this.afu.signOut(),this.router.navigate(["/login"])}SignUp(t,e){return this.afAuth.createUserWithEmailAndPassword(t,e).then(r=>{this.SendVerificationMail(),this.SetUserData(r.user)}).catch(r=>{window.alert(r.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(t=>t.sendEmailVerification()).then(()=>{this.router.navigate(["/dashboard"])})}SetUserData(t){let e=this.afs.doc(`users/${t.uid}`),r={email:t.email,displayName:t.displayName,uid:t.uid,photoURL:t.photoURL||"src/favicon.ico",emailVerified:t.emailVerified};return e.delete().then(function(){}).catch(function(f){}),e.set(r,{merge:!0})}SignIn(t,e){return this.afAuth.signInWithEmailAndPassword(t,e).then(r=>{r.user.emailVerified!==!0?(this.SetUserData(r.user),this.SendVerificationMail(),this.showLoader=!0):(this.showLoader=!1,this.ngZone.run(()=>{this.router.navigate(["/auth/login"])}))}).catch(r=>{throw r})}ForgotPassword(t){return this.afAuth.sendPasswordResetEmail(t).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(e=>{window.alert(e)})}};a.\u0275fac=function(e){return new(e||a)(x(de),x(y),x(D))},a.\u0275prov=v({token:a,factory:a.\u0275fac,providedIn:"root"});let s=a;return s})();var he=()=>["/crm"],_e=()=>["/authentication/reset-password/basic"];function Se(s,a){if(s&1&&(i(0,"p",32),l(1),o()),s&2){let n=u(2);m(),A(" ",n.errorMessage," ")}}function ye(s,a){if(s&1&&(i(0,"p",32),l(1),o()),s&2){let n=u(2);m(),A(" ",n._error.message," ")}}function Ce(s,a){if(s&1){let n=L();i(0,"form",31),b("ngSubmit",function(){g(n);let e=u();return p(e.login())}),w(1,Se,2,1,"p",32)(2,ye,2,1,"p",32),i(3,"div",33)(4,"label",34),l(5,"User Name"),o(),i(6,"input",35),U("ngModelChange",function(e){g(n);let r=u();return P(r.email,e)||(r.email=e),p(e)}),o()(),i(7,"div",36)(8,"label",37),l(9,"Password"),i(10,"a",38),l(11,"Forget password ?"),o()(),i(12,"div",39)(13,"input",40),U("ngModelChange",function(e){g(n);let r=u();return P(r.password,e)||(r.password=e),p(e)}),o(),i(14,"button",41),b("click",function(){g(n);let e=u();return p(e.toggleVisibility())}),d(15,"i"),o()(),i(16,"div",42)(17,"div",43),d(18,"input",44),i(19,"label",45),l(20," Remember password ? "),o()()()(),i(21,"div",46)(22,"button",47),l(23," Sign In "),o()()()}if(s&2){let n=u();c("formGroup",n.loginForm),m(),I(1,n.errorMessage.length>0?1:-1),m(),I(2,n._error.message.length>0?2:-1),m(4),V("ngModel",n.email),m(4),c("routerLink",S(16,_e)),m(3),c("type",n.showPassword?"text":"password"),V("ngModel",n.password),m(2),_("",n.toggleClass," align-middle"),m(7),_("btn btn-lg btn-primary",n.disabled,""),W("loader--text",n.authservice.showLoader),c("disabled",!n.loginForm.valid||n.authservice.showLoader)}}function Ee(s,a){if(s&1){let n=L();i(0,"form",31),b("ngSubmit",function(){g(n);let e=u();return p(e.Submit())}),i(1,"div",32),l(2),o(),i(3,"div",33)(4,"label",34),l(5,"User Name"),o(),d(6,"input",48),o(),i(7,"div",36)(8,"label",37),l(9,"Password "),i(10,"a",49),l(11,"Forget password ?"),o()(),i(12,"div",39),d(13,"input",50),i(14,"button",41),b("click",function(){g(n);let e=u();return p(e.toggleVisibility())}),d(15,"i"),o()(),i(16,"div",42)(17,"div",43),d(18,"input",44),i(19,"label",45),l(20," Remember password ? "),o()()()(),i(21,"div",46)(22,"button",51),l(23,"Sign In"),o()()()}if(s&2){let n=u();c("formGroup",n.loginForm),m(2),O(n.error),m(11),c("type",n.showPassword?"text":"password"),m(2),_("",n.toggleClass," align-middle"),m(7),c("disabled",!n.loginForm.valid||n.authservice.showLoader)}}var Ge=(()=>{let a=class a{constructor(t,e,r,f,fe,be){this.authservice=t,this.router=e,this.formBuilder=r,this.renderer=f,this.firebaseService=fe,this.toastr=be,this.disabled="",this.firestoreModule=this.firebaseService.getFirestore(),this.databaseModule=this.firebaseService.getDatabase(),this.authModule=this.firebaseService.getAuth(),this.email="spruko@admin.com",this.password="sprukoadmin",this.errorMessage="",this._error={name:"",message:""},this.error="",this.showPassword=!1,this.toggleClass="ri-eye-off-line";let ke=this.renderer.selectRootElement("body",!0)}ngOnInit(){this.loginForm=this.formBuilder.group({username:["spruko@admin.com",[C.required,C.email]],password:["sprukoadmin",C.required]})}clearErrorMessage(){this.errorMessage="",this._error={name:"",message:""}}login(){this.clearErrorMessage(),this.validateForm(this.email,this.password)&&(this.authservice.loginWithEmail(this.email,this.password).then(()=>{this.router.navigate(["/crm"]),console.clear()}).catch(t=>{this._error=t,this.router.navigate(["/"])}),this.toastr.success("log in successful","ynex",{timeOut:3e3,positionClass:"toast-top-right"}))}validateForm(t,e){return t.length===0?(this.errorMessage="please enter email id",!1):e.length===0?(this.errorMessage="please enter password",!1):e.length<6?(this.errorMessage="password should be at least 6 char",!1):(this.errorMessage="",!0)}get form(){return this.loginForm.controls}Submit(){this.loginForm.controls.username.value==="spruko@admin.com"&&this.loginForm.controls.password.value==="sprukoadmin"?this.router.navigate(["/crm"]):this.error="Please check email and passowrd"}ngOnDestroy(){let t=this.renderer.selectRootElement("body",!0);this.renderer.removeAttribute(t,"class")}toggleVisibility(){this.showPassword=!this.showPassword,this.toggleClass==="ri-eye-line"?this.toggleClass="ri-eye-off-line":this.toggleClass="ri-eye-line"}};a.\u0275fac=function(e){return new(e||a)(h(pe),h(y),h($),h(j),h(N),h(ce))},a.\u0275cmp=R({type:a,selectors:[["app-login"]],standalone:!0,features:[B([N]),q],decls:40,vars:5,consts:[["nav","ngbNav"],[1,"container"],[1,"row","justify-content-center","align-items-center","authentication","authentication-basic","h-100"],[1,"col-xxl-4","col-xl-5","col-lg-5","col-md-6","col-sm-8","col-12"],[1,"my-4","d-flex","justify-content-center"],[3,"routerLink"],["src","./assets/images/brand-logos/desktop-logo.png","alt","logo",1,"desktop-logo"],["src","./assets/images/brand-logos/desktop-dark.png","alt","logo",1,"desktop-dark"],[1,"card","custom-card"],[1,"card-body","p-5"],[1,"h5","fw-semibold","mb-2","text-center"],[1,"mb-4","text-muted","op-7","fw-normal","text-center"],[1,"login-option"],["ngbNav","",1,"nav-tabs"],["ngbNavItem","Firebase",1,"me-2"],["ngbNavLink",""],["src","./assets/images/firebase.svg","alt","",1,"firebase"],["ngbNavContent",""],["ngbNavItem","Angular"],["src","./favicon.ico","alt","",1,"firebase"],["ngbNavContent","",1,"mt-2"],[1,"",3,"ngbNavOutlet"],[1,"text-center"],[1,"fs-12","text-muted","mt-3"],[1,"text-primary",3,"routerLink"],[1,"text-center","my-3","authentication-barrier"],[1,"btn-list","text-center"],[1,"btn","btn-icon","btn-light"],[1,"ri-facebook-line","fw-bold","text-dark","op-7"],[1,"ri-google-line","fw-bold","text-dark","op-7"],[1,"ri-twitter-x-line","fw-bold","text-dark","op-7"],[3,"ngSubmit","formGroup"],[1,"text-danger"],[1,"col-xl-12"],["for","signin-username",1,"form-label","text-default"],["type","text","id","signin-username","placeholder","user name","autocomplete","","formControlName","username","required","",1,"form-control","mb-3",3,"ngModelChange","ngModel"],[1,"col-xl-12","mb-2"],["for","signin-password",1,"form-label","text-default","d-block"],[1,"float-end","text-danger",3,"routerLink"],[1,"input-group"],["autocomplete","","formControlName","password","required","","id","signin-password","placeholder","password",1,"form-control","form-control-lg",3,"ngModelChange","type","ngModel"],["type","button",1,"btn","btn-light",3,"click"],[1,"mt-2"],[1,"form-check"],["type","checkbox","value","","id","defaultCheck1",1,"form-check-input"],["for","defaultCheck1",1,"form-check-label","text-muted","fw-normal"],[1,"col-xl-12","d-grid","mt-2"],["type","submit","autofocus","",3,"disabled"],["type","text","id","signin-username","placeholder","user name","formControlName","username","autocomplete","",1,"form-control","mb-3"],[1,"float-end","text-danger"],["formControlName","password","autocomplete","","id","signin-password","placeholder","password",1,"form-control","mb-3",3,"type"],["type","submit",1,"btn","btn-lg","btn-primary",3,"disabled"]],template:function(e,r){if(e&1&&(i(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"a",5),d(5,"img",6)(6,"img",7),o()(),i(7,"div",8)(8,"div",9)(9,"p",10),l(10,"Sign In"),o(),i(11,"p",11),l(12," Welcome back Jhon ! "),o(),i(13,"div",12)(14,"ul",13,0)(16,"li",14)(17,"a",15),d(18,"img",16),o(),w(19,Ce,24,17,"ng-template",17),o(),i(20,"li",18)(21,"a",15),d(22,"img",19),o(),w(23,Ee,24,7,"ng-template",20),o()()(),d(24,"div",21),i(25,"div",22)(26,"p",23),l(27," Dont have an account? "),i(28,"a",24),l(29,"Sign Up"),o()()(),i(30,"div",25)(31,"span"),l(32,"OR"),o()(),i(33,"div",26)(34,"button",27),d(35,"i",28),o(),i(36,"button",27),d(37,"i",29),o(),i(38,"button",27),d(39,"i",30),o()()()()()()()),e&2){let f=T(15);m(4),c("routerLink",S(3,he)),m(20),c("ngbNavOutlet",f),m(4),c("routerLink",S(4,he))}},dependencies:[Z,G,ee,K,z,J,H,Y,te,Q,X,me,ie,oe,ne,re,se,ae,le,E,k,M,F]});let s=a;return s})();export{Ge as LoginComponent};
