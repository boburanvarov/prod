import{f as X}from"./chunk-Z3C6DEUP.js";import{n as F,x as U}from"./chunk-2FEP6AZJ.js";import{$b as b,Aa as f,Ba as h,Ca as T,Da as V,Fc as Y,Ma as y,Mb as w,Na as C,Nb as Z,Oa as B,Ob as _,Qb as H,Rb as L,Wa as z,_b as v,ac as R,ec as P,fc as E,nc as g,pc as W,qa as S,qc as M,ra as j,rc as m,tc as A,ub as D,uc as G,vb as I,vc as N,wc as O}from"./chunk-GCPY7ULT.js";import{i as u}from"./chunk-FFXK657A.js";var K=[[["ngx-dropzone-label"]]],q=["ngx-dropzone-label"];function $(t,r){if(t&1){let e=P();v(0,"ngx-dropzone-remove-badge",1),g("click",function(o){y(e);let n=W();return C(n._remove(o))}),b()}}var ee=["fileInput"],te=[[["ngx-dropzone-preview"]],"*",[["ngx-dropzone-label"]]],ie=["ngx-dropzone-preview","*","ngx-dropzone-label"];function ne(t,r){t&1&&m(0,2,["*ngIf","!_hasPreviews"])}var Ie=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=V({type:t,selectors:[["ngx-dropzone-label"]]}),t})();function p(t){return t!=null&&`${t}`!="false"}function oe(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))?Number(t):null}var re=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=h({type:t,selectors:[["ngx-dropzone-remove-badge"]],decls:3,vars:0,consts:[["x1","0","y1","0","x2","10","y2","10"],["x1","0","y1","10","x2","10","y2","0"]],template:function(e,i){e&1&&(B(),v(0,"svg"),R(1,"line",0)(2,"line",1),b())},styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;height:22px;width:22px;position:absolute;top:5px;right:5px;border-radius:50%;background:#bbb;color:#333;cursor:pointer}[_nghost-%COMP%]:hover{background:#aeaeae}[_nghost-%COMP%] > svg[_ngcontent-%COMP%]{height:10px;width:10px}[_nghost-%COMP%] > svg[_ngcontent-%COMP%] > line[_ngcontent-%COMP%]{stroke-width:2px;stroke:#fff}"]}),t})(),k=function(t){return t[t.BACKSPACE=8]="BACKSPACE",t[t.DELETE=46]="DELETE",t}(k||{}),se=(()=>{class t{constructor(e){this.sanitizer=e,this._removable=!1,this.removed=new z,this.tabIndex=0}set file(e){this._file=e}get file(){return this._file}get removable(){return this._removable}set removable(e){this._removable=p(e)}keyEvent(e){switch(e.keyCode){case k.BACKSPACE:case k.DELETE:this.remove();break;default:break}}get hostStyle(){return this.sanitizer.bypassSecurityTrustStyle(`
			display: flex;
			height: 140px;
			min-height: 140px;
			min-width: 180px;
			max-width: 180px;
			justify-content: center;
			align-items: center;
			padding: 0 20px;
			margin: 10px;
			border-radius: 5px;
			position: relative;
		`)}_remove(e){e.stopPropagation(),this.remove()}remove(){this._removable&&this.removed.next(this.file)}readFile(){return u(this,null,function*(){return new Promise((e,i)=>{let o=new FileReader;if(o.onload=n=>{e(n.target.result)},o.onerror=n=>{console.error(`FileReader failed on file ${this.file.name}.`),i(n)},!this.file)return i("No file to read. Please provide a file using the [file] Input property.");o.readAsDataURL(this.file)})})}}return t.\u0275fac=function(e){return new(e||t)(I(X))},t.\u0275cmp=h({type:t,selectors:[["ngx-dropzone-preview"]],hostVars:3,hostBindings:function(e,i){e&1&&g("keyup",function(n){return i.keyEvent(n)}),e&2&&(E("tabindex",i.tabIndex),L(i.hostStyle))},inputs:{file:"file",removable:"removable"},outputs:{removed:"removed"},ngContentSelectors:q,decls:2,vars:1,consts:[[3,"click",4,"ngIf"],[3,"click"]],template:function(e,i){e&1&&(M(K),m(0),w(1,$,1,0,"ngx-dropzone-remove-badge",0)),e&2&&(D(),_("ngIf",i.removable))},dependencies:[re,F],styles:["[_nghost-%COMP%]{background-image:linear-gradient(to top,#ededed,#efefef,#f1f1f1,#f4f4f4,#f6f6f6)}[_nghost-%COMP%]:hover, [_nghost-%COMP%]:focus{background-image:linear-gradient(to top,#e3e3e3,#ebeaea,#e8e7e7,#ebeaea,#f4f4f4);outline:0}[_nghost-%COMP%]:hover   ngx-dropzone-remove-badge[_ngcontent-%COMP%], [_nghost-%COMP%]:focus   ngx-dropzone-remove-badge[_ngcontent-%COMP%]{opacity:1}[_nghost-%COMP%]   ngx-dropzone-remove-badge[_ngcontent-%COMP%]{opacity:0}[_nghost-%COMP%]     ngx-dropzone-label{overflow-wrap:break-word}"]}),t})(),J=(()=>{class t{parseFileList(e,i,o,n){let a=[],l=[];for(let d=0;d<e.length;d++){let c=e.item(d);if(!this.isAccepted(c,i)){this.rejectFile(l,c,"type");continue}if(o&&c.size>o){this.rejectFile(l,c,"size");continue}if(!n&&a.length>=1){this.rejectFile(l,c,"no_multiple");continue}a.push(c)}return{addedFiles:a,rejectedFiles:l}}isAccepted(e,i){if(i==="*")return!0;let o=i.split(",").map(s=>s.toLowerCase().trim()),n=e.type.toLowerCase(),a=e.name.toLowerCase();return!!o.find(s=>s.endsWith("/*")?n.split("/")[0]===s.split("/")[0]:s.startsWith(".")?a.endsWith(s):s==n)}rejectFile(e,i,o){let n=i;n.reason=o,e.push(n)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=S({token:t,factory:t.\u0275fac}),t})(),we=(()=>{class t{constructor(e){this.service=e,this.change=new z,this.accept="*",this._disabled=!1,this._multiple=!0,this._maxFileSize=void 0,this._expandable=!1,this._disableClick=!1,this._processDirectoryDrop=!1,this._isHovered=!1}get _hasPreviews(){return!!this._previewChildren.length}get disabled(){return this._disabled}set disabled(e){this._disabled=p(e),this._isHovered&&(this._isHovered=!1)}get multiple(){return this._multiple}set multiple(e){this._multiple=p(e)}get maxFileSize(){return this._maxFileSize}set maxFileSize(e){this._maxFileSize=oe(e)}get expandable(){return this._expandable}set expandable(e){this._expandable=p(e)}get disableClick(){return this._disableClick}set disableClick(e){this._disableClick=p(e)}get processDirectoryDrop(){return this._processDirectoryDrop}set processDirectoryDrop(e){this._processDirectoryDrop=p(e)}_onClick(){this.disableClick||this.showFileSelector()}_onDragOver(e){this.disabled||(this.preventDefault(e),this._isHovered=!0)}_onDragLeave(){this._isHovered=!1}_onDrop(e){if(!this.disabled)if(this.preventDefault(e),this._isHovered=!1,!this.processDirectoryDrop||!DataTransferItem.prototype.webkitGetAsEntry)this.handleFileDrop(e.dataTransfer.files);else{let i=e.dataTransfer.items;if(i.length>0){let o=[],n=[];for(let l=0;l<i.length;l++){let s=i[l].webkitGetAsEntry();s.isFile?o.push(e.dataTransfer.files[l]):s.isDirectory&&n.push(s)}let a=new DataTransfer;if(o.forEach(l=>{a.items.add(l)}),!n.length&&a.items.length&&this.handleFileDrop(a.files),n.length){let l=[];for(let s of n)l.push(this.extractFilesFromDirectory(s));Promise.all(l).then(s=>{s.reduce((d,c)=>[...d,...c]).forEach(d=>{a.items.add(d)}),this.handleFileDrop(a.files)})}}}}extractFilesFromDirectory(e){function i(o){return u(this,null,function*(){try{return yield new Promise((n,a)=>o.file(n,a))}catch(n){console.log("Error converting a fileEntry to a File: ",n)}})}return new Promise((o,n)=>{let a=[],l=e.createReader(),s=()=>{l.readEntries(d=>u(this,null,function*(){if(!d.length)o(a);else{let c=d.filter(x=>x.isFile);for(let x of c){let Q=yield i(x);a.push(Q)}s()}}))};s()})}showFileSelector(){this.disabled||this._fileInput.nativeElement.click()}_onFilesSelected(e){let i=e.target.files;this.handleFileDrop(i),this._fileInput.nativeElement.value="",this.preventDefault(e)}handleFileDrop(e){let i=this.service.parseFileList(e,this.accept,this.maxFileSize,this.multiple);this.change.next({addedFiles:i.addedFiles,rejectedFiles:i.rejectedFiles,source:this})}preventDefault(e){e.preventDefault(),e.stopPropagation()}}return t.\u0275fac=function(e){return new(e||t)(I(J,2))},t.\u0275cmp=h({type:t,selectors:[["ngx-dropzone"],["","ngx-dropzone",""]],contentQueries:function(e,i,o){if(e&1&&A(o,se,5),e&2){let n;N(n=O())&&(i._previewChildren=n)}},viewQuery:function(e,i){if(e&1&&G(ee,7),e&2){let o;N(o=O())&&(i._fileInput=o.first)}},hostVars:8,hostBindings:function(e,i){e&1&&g("click",function(){return i._onClick()})("dragover",function(n){return i._onDragOver(n)})("dragleave",function(){return i._onDragLeave()})("drop",function(n){return i._onDrop(n)}),e&2&&H("ngx-dz-disabled",i.disabled)("expandable",i.expandable)("unclickable",i.disableClick)("ngx-dz-hovered",i._isHovered)},inputs:{accept:"accept",disabled:"disabled",multiple:"multiple",maxFileSize:"maxFileSize",expandable:"expandable",disableClick:"disableClick",processDirectoryDrop:"processDirectoryDrop",id:"id",ariaLabel:[f.None,"aria-label","ariaLabel"],ariaLabelledby:[f.None,"aria-labelledby","ariaLabelledby"],ariaDescribedBy:[f.None,"aria-describedby","ariaDescribedBy"]},outputs:{change:"change"},features:[Y([J])],ngContentSelectors:ie,decls:5,vars:8,consts:[["fileInput",""],["type","file",3,"change","id","multiple","accept","disabled"],[4,"ngIf"]],template:function(e,i){if(e&1){let o=P();M(te),v(0,"input",1,0),g("change",function(a){return y(o),C(i._onFilesSelected(a))}),b(),w(2,ne,1,0,"ng-content",2),m(3),m(4,1)}e&2&&(_("id",i.id)("multiple",i.multiple)("accept",i.accept)("disabled",i.disabled),Z("aria-label",i.ariaLabel)("aria-labelledby",i.ariaLabelledby)("aria-describedby",i.ariaDescribedBy),D(2),_("ngIf",!i._hasPreviews))},dependencies:[F],styles:["[_nghost-%COMP%]{display:flex;align-items:center;height:180px;background:#fff;cursor:pointer;color:#717386;border:2px dashed #717386;border-radius:5px;font-size:16px;overflow-x:auto}.ngx-dz-hovered[_nghost-%COMP%]{border-style:solid}.ngx-dz-disabled[_nghost-%COMP%]{opacity:.5;cursor:no-drop;pointer-events:none}.expandable[_nghost-%COMP%]{overflow:hidden;height:unset;min-height:180px;flex-wrap:wrap}.unclickable[_nghost-%COMP%]{cursor:default}[_nghost-%COMP%]     ngx-dropzone-label{text-align:center;z-index:10;margin:10px auto}[_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:.1px;height:.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1}[_nghost-%COMP%]   input[_ngcontent-%COMP%]:focus +   ngx-dropzone-label{outline:1px dotted #000;outline:-webkit-focus-ring-color auto 5px}"]}),t})();var Pe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=T({type:t}),t.\u0275inj=j({imports:[[U]]}),t})();export{Ie as a,se as b,we as c,Pe as d};
